(this["webpackJsonpdeg-jpeg"]=this["webpackJsonpdeg-jpeg"]||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(10),c=n.n(r),i=n(5),s=(n(37),n(38),n(6)),u=n(2),o=n.n(u),l=n(12),j=n(7),b=Object(j.actionCreatorFactory)("JPEG"),p=b("CHANGE_IMAGE"),f=b("CHANGE_QUALITY"),O=b("ADD_JPEG"),d=b("CHANGE_JPEG_SET"),v=b("CHANGE_FILENAME"),m=n(27),h=Object(m.a)((function(e){return e.status}),(function(e){return e})),g=n(8),y={url:"",quality:92,jpegs:[],filename:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;return Object(j.isType)(t,p)?Object(g.a)(e,(function(e){e.url=t.payload.url})):Object(j.isType)(t,f)?Object(g.a)(e,(function(e){e.quality=t.payload.quality})):Object(j.isType)(t,O)?Object(g.a)(e,(function(e){e.jpegs.push(t.payload.src)})):Object(j.isType)(t,d)?Object(g.a)(e,(function(e){e.jpegs=t.payload.srces.map((function(e){return e}))})):Object(j.isType)(t,v)?Object(g.a)(e,(function(e){e.filename=t.payload.filename})):e},w=n(3),E=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.buildInputFile)(t,"image1.png");case 2:return a=e.sent,r=["convert",a.name,"-quality","".concat(n),"out.jpeg"],e.next=6,Object(w.call)([a],r);case 6:return c=e.sent,i=c.outputFiles[0],e.abrupt("return",URL.createObjectURL(i.blob));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=n(1),q=function(){var e=function(){var e=Object(i.b)(),t=Object(a.useState)(!1),n=Object(s.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)(""),j=Object(s.a)(u,2),b=j[0],p=j[1],f=Object(i.c)(h),O=Object(a.useCallback)(Object(l.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),t.prev=1,n=1,(a=new URL(window.location.href).searchParams.get("d"))&&(n=parseInt(a)||1),r=[],!f.url){t.next=10;break}return t.next=9,Array.from({length:n}).map((function(){return""})).reduce(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.t0=n,e.next=6,E(n.slice(-1)[0],f.quality);case 6:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Promise.resolve([f.url]));case 9:r=t.sent;case 10:c(!1),e(d({srces:r})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),c(!1),p(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[1,14]])}))),[f.url,f.quality,e]);return[f,O,r,b]}(),t=Object(s.a)(e,3),n=t[0],r=t[1],c=t[2];Object(a.useEffect)((function(){r()}),[r]);var u=n.filename.split(".");u.splice(-1,0,"-".concat(n.quality));var j=[u.slice(0,-1).join(""),"jpg"].join("."),b=n.jpegs.slice(-1)[0];return Object(k.jsxs)("div",{className:"Previewer",children:[Object(k.jsx)("a",{href:b,download:j,children:Object(k.jsx)("img",{src:b,alt:n.filename,style:{maxWidth:"100%"}})}),b?Object(k.jsx)("p",{children:"\u753b\u50cf\u30af\u30ea\u30c3\u30af\u3067\u3060\u3046\u3093\u308d\u30fc\u3069\u3067\u304d\u307e\u3059"}):Object(k.jsx)(k.Fragment,{}),Object(k.jsx)("p",{children:c?"\u3000loading\u3000":"\u3000"})]})},A=function(){var e=Object(i.b)();return Object(k.jsx)("div",{className:"ImageFileLoader",children:Object(k.jsx)("input",{type:"file",onChange:function(t){if(null!==t.target.files){var n=t.target.files[0];if(!n.type.includes("image/"))return alert("\u753b\u50cf\u3057\u304b\u9078\u629e\u3067\u304d\u307e\u305b\u3093"),void(t.target.value="");var a=URL.createObjectURL(n),r=n.name;e(p({url:a})),e(v({filename:r}))}}})})},C=function(){var e=Object(i.b)(),t=Object(i.c)(h),n=Object(a.useState)(t.quality),r=Object(s.a)(n,2),c=r[0],u=r[1],o=Object(a.useState)(t.quality),l=Object(s.a)(o,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){setTimeout((function(){c===j&&e(f({quality:j})),b(c)}),200)}),[c,j,e]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("input",{type:"range",value:c,min:1,max:100,step:1,style:{width:"300px"},onChange:function(e){var t=parseFloat(e.target.value);u(t)}}),Object(k.jsx)("input",{type:"number",value:c,min:1,max:100,step:1,onChange:function(e){var t=parseFloat(e.target.value);u(t)}})]})},F=function(){return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(q,{}),Object(k.jsx)(A,{}),Object(k.jsx)(C,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=n(11),G=n(28),L=Object(T.combineReducers)({status:x}),N=Object(T.createStore)(L,Object(G.composeWithDevTools)());c.a.render(Object(k.jsx)(i.a,{store:N,children:Object(k.jsx)(F,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,n){},38:function(e,t,n){}},[[132,1,2]]]);
//# sourceMappingURL=main.1b953b21.chunk.js.map