(this["webpackJsonpdeg-jpeg"]=this["webpackJsonpdeg-jpeg"]||[]).push([[0],{17:function(e,t,a){e.exports=a(31)},27:function(e,t,a){},28:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),u=a.n(c),i=a(1),l=(a(27),a(28),a(3)),o=a(5),s=a.n(o),f=a(4),p=Object(f.actionCreatorFactory)("JPEG"),m=p("CHANGE_IMAGE"),b=p("CHANGE_QUALITY"),j=p("ADD_JPEG"),d=p("CHANGE_JPEG_SET"),v=p("CHANGE_FILENAME"),g=a(15),O=Object(g.a)((function(e){return e.status}),(function(e){return e})),y=a(8),E={url:"",quality:.92,jpegs:[],filename:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return Object(f.isType)(t,m)?Object(y.a)(e,(function(e){e.url=t.payload.url})):Object(f.isType)(t,b)?Object(y.a)(e,(function(e){e.quality=t.payload.quality})):Object(f.isType)(t,j)?Object(y.a)(e,(function(e){e.jpegs.push(t.payload.src)})):Object(f.isType)(t,d)?Object(y.a)(e,(function(e){e.jpegs=t.payload.srces.map((function(e){return e}))})):Object(f.isType)(t,v)?Object(y.a)(e,(function(e){e.filename=t.payload.filename})):e},w=function(e){return new Promise((function(t,a){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(e){return a(e)},n.src=e}))},x=function(e,t){var a,n,r;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=document.createElement("canvas"),c.next=3,s.a.awrap(w(e));case 3:return n=c.sent,a.width=n.naturalWidth,a.height=n.naturalHeight,null===(r=a.getContext("2d"))||void 0===r||r.drawImage(n,0,0),c.abrupt("return",a.toDataURL("image/jpeg",t));case 9:case"end":return c.stop()}}))},q=function(){var e=function(){var e=Object(i.b)(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)(""),o=Object(l.a)(u,2),f=o[0],p=o[1],m=Object(i.c)(O),b=Object(n.useCallback)((function(){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return c(!0),a.prev=1,a.next=4,s.a.awrap(Array.from({length:10}).map((function(){return""})).reduce((function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(e);case 2:return t=a.sent,a.t0=t,a.next=6,s.a.awrap(x(t.slice(-1)[0],m.quality));case 6:return a.t1=a.sent,a.t0.push.call(a.t0,a.t1),a.abrupt("return",t);case 9:case"end":return a.stop()}}))}),Promise.resolve([m.url])));case 4:t=a.sent,c(!1),e(d({srces:t})),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),c(!1),p(a.t0.message);case 13:case"end":return a.stop()}}),null,null,[[1,9]])}),[m.url,m.quality,e]);return[m,b,r,f]}(),t=Object(l.a)(e,3),a=t[0],c=t[1],u=t[2];Object(n.useEffect)((function(){c()}),[c]);var o=a.filename.split(".");o.splice(-1,0,"-".concat(a.quality));var f=[o.slice(0,-1).join(""),o.slice(-1)].join("."),p=a.jpegs.slice(-1)[0];return r.a.createElement("div",{className:"Previewer"},r.a.createElement("a",{href:p,download:f},r.a.createElement("img",{src:p,alt:a.filename,style:{maxWidth:"100%"}})),p?r.a.createElement("p",null,"\u753b\u50cf\u30af\u30ea\u30c3\u30af\u3067\u3060\u3046\u3093\u308d\u30fc\u3069\u3067\u304d\u307e\u3059"):r.a.createElement(r.a.Fragment,null),r.a.createElement("p",null,u?"loading":"\u3000"))},A=function(){var e=Object(i.b)();return r.a.createElement("div",{className:"ImageFileLoader"},r.a.createElement("input",{type:"file",onChange:function(t){if(null!==t.target.files){var a=t.target.files[0];if(!a.type.includes("image/"))return alert("\u753b\u50cf\u3057\u304b\u9078\u629e\u3067\u304d\u307e\u305b\u3093"),void(t.target.value="");var n=URL.createObjectURL(a),r=a.name;e(m({url:n})),e(v({filename:r}))}}}))},C=function(){var e=Object(i.b)(),t=Object(i.c)(O),a=Object(n.useState)(t.quality),c=Object(l.a)(a,2),u=c[0],o=c[1],s=Object(n.useState)(t.quality),f=Object(l.a)(s,2),p=f[0],m=f[1];return Object(n.useEffect)((function(){setTimeout((function(){u===p&&e(b({quality:p})),m(u)}),200)}),[u,p,e]),r.a.createElement("input",{type:"range",defaultValue:t.quality,min:0,max:1,step:.01,onChange:function(e){var t=parseFloat(e.target.value);o(t)}})},T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null),r.a.createElement(A,null),r.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(7),N=a(16),I=Object(G.combineReducers)({status:h}),k=Object(G.createStore)(I,Object(N.composeWithDevTools)());u.a.render(r.a.createElement(i.a,{store:k},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.e274e770.chunk.js.map