(this["webpackJsonpdeg-jpeg"]=this["webpackJsonpdeg-jpeg"]||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(10),r=n.n(c),i=n(5),s=(n(37),n(38),n(6)),u=n(2),o=n.n(u),l=n(12),j=n(7),b=Object(j.actionCreatorFactory)("JPEG"),p=b("CHANGE_IMAGE"),f=b("CHANGE_QUALITY"),O=b("ADD_JPEG"),d=b("CHANGE_JPEG_SET"),v=b("CHANGE_FILENAME"),m=n(27),h=Object(m.a)((function(e){return e.status}),(function(e){return e})),g=n(8),y={url:"",quality:.92,jpegs:[],filename:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;return Object(j.isType)(t,p)?Object(g.a)(e,(function(e){e.url=t.payload.url})):Object(j.isType)(t,f)?Object(g.a)(e,(function(e){e.quality=t.payload.quality})):Object(j.isType)(t,O)?Object(g.a)(e,(function(e){e.jpegs.push(t.payload.src)})):Object(j.isType)(t,d)?Object(g.a)(e,(function(e){e.jpegs=t.payload.srces.map((function(e){return e}))})):Object(j.isType)(t,v)?Object(g.a)(e,(function(e){e.filename=t.payload.filename})):e},w=n(3),E=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,c,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.buildInputFile)(t,"image1.png");case 2:return a=e.sent,c=["convert",a.name,"-quality","".concat(Math.floor(100*(n||.01))),"out.jpeg"],e.next=6,Object(w.call)([a],c);case 6:return r=e.sent,i=r.outputFiles[0],e.abrupt("return",URL.createObjectURL(i.blob));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=n(1),A=function(){var e=function(){var e=Object(i.b)(),t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(""),j=Object(s.a)(u,2),b=j[0],p=j[1],f=Object(i.c)(h),O=Object(a.useCallback)(Object(l.a)(o.a.mark((function t(){var n,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,n=1,(a=new URL(window.location.href).searchParams.get("d"))&&(n=parseInt(a)||1),t.next=7,Array.from({length:n}).map((function(){return""})).reduce(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.t0=n,e.next=6,E(n.slice(-1)[0],f.quality);case 6:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Promise.resolve([f.url]));case 7:c=t.sent,r(!1),e(d({srces:c})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),r(!1),p(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),[f.url,f.quality,e]);return[f,O,c,b]}(),t=Object(s.a)(e,3),n=t[0],c=t[1],r=t[2];Object(a.useEffect)((function(){c()}),[c]);var u=n.filename.split(".");u.splice(-1,0,"-".concat(n.quality));var j=[u.slice(0,-1).join(""),"jpg"].join("."),b=n.jpegs.slice(-1)[0];return Object(q.jsxs)("div",{className:"Previewer",children:[Object(q.jsx)("a",{href:b,download:j,children:Object(q.jsx)("img",{src:b,alt:n.filename,style:{maxWidth:"100%"}})}),b?Object(q.jsx)("p",{children:"\u753b\u50cf\u30af\u30ea\u30c3\u30af\u3067\u3060\u3046\u3093\u308d\u30fc\u3069\u3067\u304d\u307e\u3059"}):Object(q.jsx)(q.Fragment,{}),Object(q.jsx)("p",{children:r?"loading":"\u3000"})]})},k=function(){var e=Object(i.b)();return Object(q.jsx)("div",{className:"ImageFileLoader",children:Object(q.jsx)("input",{type:"file",onChange:function(t){if(null!==t.target.files){var n=t.target.files[0];if(!n.type.includes("image/"))return alert("\u753b\u50cf\u3057\u304b\u9078\u629e\u3067\u304d\u307e\u305b\u3093"),void(t.target.value="");var a=URL.createObjectURL(n),c=n.name;e(p({url:a})),e(v({filename:c}))}}})})},T=function(){var e=Object(i.b)(),t=Object(i.c)(h),n=Object(a.useState)(t.quality),c=Object(s.a)(n,2),r=c[0],u=c[1],o=Object(a.useState)(t.quality),l=Object(s.a)(o,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){setTimeout((function(){r===j&&e(f({quality:j})),b(r)}),200)}),[r,j,e]),Object(q.jsx)("input",{type:"range",defaultValue:t.quality,min:0,max:1,step:.01,onChange:function(e){var t=parseFloat(e.target.value);u(t)}})},C=function(){return Object(q.jsxs)("div",{className:"App",children:[Object(q.jsx)(A,{}),Object(q.jsx)(k,{}),Object(q.jsx)(T,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(11),L=n(28),N=Object(G.combineReducers)({status:x}),F=Object(G.createStore)(N,Object(L.composeWithDevTools)());r.a.render(Object(q.jsx)(i.a,{store:F,children:Object(q.jsx)(C,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,n){},38:function(e,t,n){}},[[132,1,2]]]);
//# sourceMappingURL=main.2e9781cf.chunk.js.map